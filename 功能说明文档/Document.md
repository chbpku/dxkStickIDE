# 主板基础库
## 模块：mb
主板基础接口文件，包含调用I2C接口的底层封装功能
1. ### remote_on(short=1)
    启动远程模式（在主板两个接口查找不到所需模块时会通过广播接口搜索）
    #### 参数:
    - short(默认为1): 短接模式，为真时当本地查找到结果时将不再搜索广播网络；否则将始终在广播中搜索结果
    #### 返回值: 无
1. ### command(slot, bseq, size=0, raw=False)
    调用I2C接口的底层函数，支持（本地+网络中）按ID匹配与按类型遍历  
    ID匹配与类型遍历模式在远程模式打开时会自动搜索网络内子节点接口
    #### 参数:
    - slot: 命令执行位置，可以为本地I2C地址（详见Document_addr.md），广播地址（元组，内容为组号），或全局搜索命令（None）；通常直接输入slot函数转换的结果
    - bseq: 将输入I2C总线的字节串命令
    - size(默认为0): 执行命令后从I2C读取的字节串结果长度；默认为0时不读取
    - raw(默认为False): 是否将字节串结果保留，默认情况将自动将字节串转换为整数
    #### 返回值:  
    - None: 无返回结果
    - 单个结果，根据raw参数将为bytes或int类型
    - 多个结果将存放于元组中
1. ### get_type(addr)
    获取某个接口上模块的类型，支持（本地+网络中）按ID匹配
    #### 参数:
    - addr: 地址，可以为本地I2C地址（详见Document_addr.md），或指定模块的8位ID（str格式）
    #### 返回值:  
    - None: 该地址无模块
    - 整数1-8，分别对应8种模块
1. ### get_state(addr)
    获取某个接口上模块的工作状态，支持（本地+网络中）按ID匹配
    #### 参数:
    - addr: 地址，可以为本地I2C地址（详见Document_addr.md），或指定模块的8位ID（str格式）
    #### 返回值:  
    - None: 该地址无模块
    - 正常使用的模块应返回1
1. ### get_id(addr)
    获取某个接口上模块的ID
    #### 参数:
    - addr: 地址，可以为本地I2C地址（详见Document_addr.md）
    #### 返回值:  
    - None: 该地址无模块
    - 长度为8的16进制字符串，为该位置模块的唯一ID号
1. ### slot(addr, type=None)
    将用户输入的地址转换为command命令可接收的结果
    #### 参数:
    - addr: 地址，可以为本地I2C地址（详见Document_addr.md），或指定模块的8位ID（str格式）
    - type(默认为None): 当addr为None时指定，输入command函数后
    #### 返回值:  
    - None:  
        1. 表示按类型搜索
        1. 未找到匹配结果
    - 包含ID的元组: 远程模式打开后，若输入的ID在A、B插槽无匹配结果，将发送至远程模块进一步查找
1. ### get_bin()
    获取拨码开关当前的二进制位
    #### 参数：无
    #### 返回值：
    长度为8的字符串，以"0"或"1"显示拨码开关各位
1. ### refresh(p)
    需要在插槽变动时运行，以更新指定插槽的连接情况
    #### 参数：
    - p: 端口编号，从A至P分别为0-15
    #### 返回值：无
---
## 模块：mb_radio
包括广播网络发送命令、接收数据的底层接口  
通常不需要用户直接使用  
_注: 使用前需执行mb.remote_on()函数_
1. ### channel()
    #### 参数: 无
    #### 返回值:  
    拨码开关前5位指示的广播频道(0-31)
1. ### group()
    #### 参数: 无
    #### 返回值:  
    拨码开关后3位指示的组别(0-7)
1. ### _send(bytes, to_int)
    直接向广播频道内发送字节串序列，并接收所有的返回结果
    #### 参数:
    - bytes: 待发送的字节串
    - to_int: 是否将接收的bytes结果转换为int
    #### 返回值: 无，结果将存储于全局变量内
1. ### send(id, bseq, size, to_int)
    向广播频道内子节点发送控制I2C模块的命令，并接收结果
    #### 参数:
    - id: 待查询的标识符
        1. 模块类型
        1. 模块8位ID
    - bseq: 待执行的I2C命令
    - size: 待读取的结果字节串长度
    - to_int: 是否将接收的bytes结果转换为int
    #### 返回值:  
    - None: 无返回结果
    - 单个结果，根据to_int参数将为bytes或int类型
    - 多个结果将存放于元组中
1. ### r_eval(seq, grp=-1)
    向广播频道内子节点
    #### 参数:
    - seq:  
    - grp(默认为-1): 网络内分组为grp的子节点将执行该命令，若为-1则所有子节点都将执行命令
    #### 返回值:  
    元组，包含所有响应的子节点相应的返回结果: (字节串, 该节点组别)  
    其中字节串结果由原始结果raw通过b'%r'%raw转换而来
---
# 高级功能库
## 模块：mb_node
远程模块，对网络内子节点的micro:bit本身进行简单控制  
通过拨码开关设置的频道与组别进行区分  
_注: 使用前需执行mb.remote_on()函数_
1. ### show(img, grp=-1)
    #### 参数:
    - img: 待显示的图片
        1. 内置图片的名称  
        _如'HAPPY'代表内置Image.HAPPY_
        1. 初始化图片所使用的点阵字符串  
        _如'00000:09090:00000:90009:09990'代表Image('00000:09090:00000:90009:09990')_
    - grp(默认为-1): 网络内分组为grp的子节点将执行该命令，若为-1则所有子节点都将执行命令
    #### 返回值: 无
1. ### scroll(text, wait=0, grp=-1)
    #### 参数:
    - text: 字符串对象，为需要显示的文字
    - wait(默认为0): 在显示文字时是否阻塞，默认为非阻塞
    - grp(默认为-1): 网络内分组为grp的子节点将执行该命令，若为-1则所有子节点都将执行命令
    #### 返回值: 无
1. ### button(btn, grp=-1)
    #### 参数:
    - btn: 'a'或'b'，表示读取button_a或button_b的get_presses()函数
    - grp(默认为-1): 网络内分组为grp的子节点将执行该命令，若为-1则所有子节点都将执行命令
    #### 返回值:  
    元组，包含所有响应的子节点相应的按钮返回结果: (按钮按下次数, 该节点组别)
1. ### play(mid, wait=0, grp=-1)
    #### 参数:
    - mid: 待播放的音乐，支持输入内置音乐的名称  
    _如'NYAN'代表内置music.NYAN_
    - wait(默认为0): 在播放音乐时是否阻塞，默认为非阻塞
    - grp(默认为-1): 网络内分组为grp的子节点将执行该命令，若为-1则所有子节点都将执行命令
    #### 返回值: 无
---
___注: 以下所有函数内addr参数均表示命令执行位置，可以为本地I2C地址（0x16为A口，0x17为B口），广播地址（元组，内容为组号）；默认为None则为遍历所有该类型模块___
## 模块：oled
控制OLED显示屏模块
1. ### show(y, x, string, addr=None)
    在显示屏指定位置显示指定文字
    #### 参数:
    - y: 显示行位置  
    _0, 2, 4, 6分别对应屏幕第一至四行_
    - x: 起始显示列位置  
    _单位为像素，屏幕内每字宽8像素，0表示左对齐，8为右移一格，以此类推_
    - string: 需显示的字符串/字节串  
        _注: 若需显示中文，需提前转为GB2312编码，并以bytes格式输入_
        _注2: 字串最大长度为16_
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### clear(addr=None)
    清空显示屏内容
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
---
## 模块：temp_humi
控制温湿度传感器模块
1. ### temp(addr=None)
    获取传感器温度读数
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，单位为摄氏度(℃)
    - 多个结果将存放于元组中
1. ### humi(addr=None)
    获取传感器湿度读数
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，单位为百分比(%)
    - 多个结果将存放于元组中
1. ### temp_humi(addr=None)
    获取传感器温度、湿度读数
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 单个结果为包含两个整数的元组，单位分别为摄氏度(℃)与百分比(%)
    - 多个结果将存放于嵌套元组中
---
## 模块：led
控制LED灯泡模块
1. ### on(addr=None)
    打开灯泡
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### off(addr=None)
    关闭灯泡
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
---
## 模块：poten
控制电位器旋钮模块
1. ### value(addr=None)
    获取电位器阻值读数
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，范围为0-4095，分别对应旋钮两侧旋转极限
    - 多个结果将存放于元组中
---
## 模块：light
控制光敏电阻模块
1. ### value(addr=None)
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，范围为0-4095，分别对应最亮(0)与最暗(4095)
    - 多个结果将存放于元组中
---
## 模块：mic
控制麦克风模块
1. ### value(addr=None)
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，范围为0-4095，表示接收声音强度
    - 多个结果将存放于元组中
---
## 模块：joypad
控制游戏手柄模块
1. ### conv(data)
    用于将字节串转换为手柄状态数据
    #### 参数:
    - data: 直接读取的9位字节串
    #### 返回值:  
    长度为2的元组，分别为keys与stickxy函数返回值，详见后文
1. ### values(addr=None)
    获取手柄按键、摇杆状态
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None, None: 无返回结果
    - 长度为2的元组，分别为keys与stickxy函数返回值，详见后文
    - 多个结果将存放于嵌套元组中
1. ### keys(addr=None)
    获取手柄按键状态
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 长度为5的元组，其值为0或1，分别对应摇杆按键及右侧上、下、左、右按键是否按下
    - 多个结果将存放于嵌套元组中
1. ### stickxy(addr=None)
    获取手柄摇杆状态（连续值）
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 长度为2的元组(x, y)，分别对应摇杆横向、纵向偏移量
        - 自然状态读数均在0附近，读数绝对值不大于2048
        - 摇杆向右时x增加，向下时y增加
    - 多个结果将存放于嵌套元组中
1. ### stick_directions(addr=None)
    获取手柄摇杆状态（离散值）
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 长度为2的元组(x, y)，分别对应摇杆横向、纵向方向
        - -1、0、1分别代表负方向、静止、正方向
        - 摇杆向右时x增加，向下时y增加
    - 多个结果将存放于嵌套元组中
---
## 模块：ultrasonic
控制超声波测距模块
1. ### value(addr=None)
    获取测距读数
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:  
    - None: 无返回结果
    - 整数，单位为厘米(cm)，范围为0-400
    - 多个结果将存放于嵌套元组中
---
## 模块：clock
控制时钟模块
1. ### time(addr=None)

    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值: 
    - None: 无返回结果
    - 6位元组，分别为年（20xx年后两位）、月、日、时、分、秒
1. ### set_time(Y, M, D, h, m, s, addr=None)
    #### 参数:
    - Y: 年（20xx年后两位），0-99的整数
    - M: 月，1-12的整数
    - D: 日，1-31的整数
    - h: 时，0-23的整数
    - m: 分，0-59的整数
    - s: 秒，0-95的整数
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
---
## 模块：touch
读取触摸按钮模块状态
1. ### get(addr=None)
    返回按钮是否被触摸
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值: 
    - 0或1，0表示未触摸，1表示触摸
---
## 模块：neo_color
neopixel控制模块的功能接口，包含24位彩色设置像素功能
1. ### setup(grps, addr=None)
    初始化控制模块  
    注1：在执行其余功能前必须运行一次该命令  
    注2：与neo_img.setup功能相同
    #### 参数:
    - grps: 插槽编号，按连接顺序输入  
        - 1: 24灯珠环状排列  
        - 2: 9*9灯珠方阵  
        - 3: 30灯珠的灯带
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### set_pixel(g, pos, c, addr=None)
    将指定分组、指定位置的像素设置为指定颜色
    #### 参数:
    - g: 待设置分组序号
    - pos: 待设置像素位置
    - c: 设置的颜色  
    _包含3个取值为0-255整数的元组_
    - addr(默认为None):  
    #### 返回值: 无
1. ### set_pixel_range(g, pos, cs, addr=None)
    将一串颜色序列显示于指定分组、指定位置
    #### 参数:
    - g: 待设置分组序号
    - pos: 颜色序列起始位置
    - cs: 设置的颜色序列  
    _由多个包含3个取值为0-255整数的元组组成的列表或元组_
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### set_xy(g, x, y, c, addr=None)
    (用于9*9灯带方阵)将指定横纵坐标的像素设置为指定颜色
    #### 参数:
    - g: 待设置分组序号
    - x: 横坐标；若输入-1代表整行设置
    - y: 纵坐标；若输入-1代表整列设置
    - c: 设置的颜色  
    _包含3个取值为0-255整数的元组_
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### fill(g, c, addr=None)
    将整组填充为指定颜色
    #### 参数:
    - g: 待设置分组序号
    - c: 设置的颜色  
    _包含3个取值为0-255整数的元组_
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
---
## 模块：neo_img
neopixel控制模块的功能接口，包含设置图案功能
1. ### setup(grps, addr=None)
    初始化控制模块  
    注1：在执行其余功能前必须运行一次该命令  
    注2：与neo_color.setup功能相同
    #### 参数:
    - grps: 插槽编号，按连接顺序输入  
        - 1: 24灯珠环状排列  
        - 2: 9*9灯珠方阵  
        - 3: 30灯珠的灯带
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### set_rainbow(g, t, x, n, addr=None)
    在分组内指定区间设置动画效果
    #### 参数:
    - g: 待设置分组序号
    - t: 动画类型编号
        - 0: 彩虹渐变
        - 1: Sinelon
    - x: 动画起始位置
    - n: 区间长度
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
---
# TODO 功能待验证
## 模块：neo_img
1. ### set_image(g, img, x=None, y=None, m=0, addr=None)
    #### 参数:
    - g: 待设置分组序号
    - img: 将显示的microbit.Image对象
    - x(默认为None): 图片左侧位置，默认为居中
    - y(默认为None): 图片上沿位置，默认为居中
    - m(默认为0): 叠加模式，默认为0直接覆盖，设置1为变亮模式
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### set_image_RGB(g, imgs, x=None, y=None, m=0, addr=None)
    #### 参数:
    - g: 待设置分组序号
    - imgs: 将显示的三通道Image列表
    - x(默认为None): 图片左侧位置，默认为居中
    - y(默认为None): 图片上沿位置，默认为居中
    - m(默认为0): 叠加模式，默认为0直接覆盖，设置1为变亮模式
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
1. ### shift(g, x, y=0, addr=None)
    #### 参数:
    - g: 待设置分组序号
    - x: 横向滚动距离
    - y(默认为0): 纵向滚动距离，默认不滚动
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
## 模块：motor
1. ### motor(val, addr=None)
    #### 参数:
    - val: 电机运动距离
        - 输入类型: 整数
        - 输入范围: 范围: [-1024, 1024]
    - addr(默认为None): 命令执行位置
    #### 返回值: 无
## 模块：（海拔模块）
1. ### get_p(addr=None)
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:
    - None: 无返回结果
    - 整数，范围为0-65535，代表压强值
1. ### get_t(addr=None)
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:
    - None: 无返回结果
    - 整数，范围为0-65535，代表温度值
1. ### get_a(addr=None)
    #### 参数:
    - addr(默认为None): 命令执行位置
    #### 返回值:
    - None: 无返回结果
    - 整数，范围为0-65535，代表海拔值
---